# base
default:
  image: registry.git.insea.io/sail/sail-engineering/golden-images/python_bazel_golden:latest
  before_script:
    - pip config unset global.index-url
    - pip config unset global.trusted-host
    - pip install -r requirements.txt
  tags:
    - sail

stages:
  - lint
  - test

flake8:
  stage: lint
  script:
    - flake8 jdft --count --show-source --statistics

yapf:
  stage: lint
  script:
    - yapf -r -d jdft

test:
  stage: test
  script:
    - python3 -m pytest -s tests
