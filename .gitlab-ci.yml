# base
default:
  image: registry.git.insea.io/sail/sail-engineering/golden-images/python_bazel_golden:latest
  before_script:
    - pip config unset global.index-url
    - pip config unset global.trusted-host
    - pip install -r requirements.txt
  tags:
    - sail

stages:
  - lint
  - test

flake8:
  stage: lint
  script:
    - make flake8

yapf:
  stage: lint
  script:
    - make py-format

test:
  stage: test
  script:
    - bazel test --test_output=all //tests/...
